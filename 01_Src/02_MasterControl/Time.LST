C51 COMPILER V9.53.0.0   TIME                                                              08/21/2017 21:04:33 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE TIME
OBJECT MODULE PLACED IN ..\04_bin\MainCtrl\Time.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Time.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2) OBJECT(..\04_
                    -bin\MainCtrl\Time.obj)

line level    source

   1          /*********************************************************
   2               +---------------------------------------------+
   3               |智趣电子       原创程序    多功能旋转POV LED |
   4               +---------------------------------------------+     
   5          
   6           此源码版权属 智趣电子 全权享有，如欲引用，敬请署名并告知
   7                  严禁随意用于商业目的，违者必究，后果自负
   8                  智趣电子 
   9                   ->产品咨询 QQ:1327074668 MSN:zhiqudz@163.com
  10               ->产品网店 http://58788771.taobao.com/
  11                            Tel:18106718021
  12             /*********************************************/
  13             /* 项 目:  平面/立体/三色/多功能旋转POV LED  */
  14             /* 模 块： 定时器模块              */
  15             /* 功 能： 定时器0，定时器1基准时间      */
  16             /* 版 本： V3.0                */
  17             /* 设 计： ZhiQu Studio            */
  18             /* 时 间： 2013年7月5日            */
  19             /* 修 改:  2013.7.5.19:00 创建项目       */
  20             /* 说 明： 主控MCU STC115F08S2         */     
  21             /*********************************************/    
  22          /*********************************************************/
  23          #include "Time.h"
  24          
  25          
  26          
  27          //===============定时器初始化程序==================//
  28          void Time_init(void)
  29          {
  30   1         AUXR=0XD5; //设置T0 1T模式, 模式串行模式为12T, 允许使用内部RAM,允许独立波特率发生器，
  31   1                // b7       b6       b5       b4      b3     b2     b1     b0
  32   1                //t0x12   t1x12    uart_m0x6  TR2   T2/CT   T2X12 EXTRAM  SIST2       
  33   1                //  1        1      0      1     0    1      0      1
  34   1              //SIST2   定时器2是否用作串口1的波特率发生器  
  35   1              //EXTRAM  内部/外部RAM存取控制   0允许内部RAM存取，
  36   1              //T2x12    定时器2时钟模式
  37   1              //T2/CT    定时器2用作定时还是计数器
  38   1              //TR2      定时器2允许运行
  39   1              
  40   1              
  41   1         TMOD=0X00; //定时器0工作方式1,/定时器1工作方式2,8位自动重装；
  42   1                //   b7   b6   b5  b4  b3   b2  b1   b0/
  43   1                //  GATE  C/T  M1   M0 GATE C/T M1   M0
  44   1                //    0   0    1  0 0  0   0   1
  45   1      
  46   1         /*
  47   1         IT0=1;      //外中断0触发方式,为1时为下降沿有效,为0时低电平有效
  48   1         IT1=1;           //外中断1触发方式, 为1时为下降沿有效,为0时低电平有效
  49   1         EX0=1;      //外中断0使能标志
  50   1         EX1=1;      //外中断1使能标志
  51   1         EA=1;      //开总中断；
  52   1         */
  53   1         TL0 = 0xD4;    //设置定时初值   1MS
  54   1         TH0 = 0xCD;    //设置定时初值
C51 COMPILER V9.53.0.0   TIME                                                              08/21/2017 21:04:33 PAGE 2   

  55   1         //TL1 = 0xF8;    //设置定时初值   255us
  56   1         //TH1 = 0xE9;    //设置定时初值
  57   1         TL1 = 0x33;    //设置定时初值   125us
  58   1         TH1 = 0xF5;    //设置定时初值
  59   1         TR1 = 1;       //开启定时器1
  60   1      
  61   1         TR0 = 1;       //打开定时器0
  62   1         TL0 = 0xD4;    //设置定时初值   1MS
  63   1         TH0 = 0xCD;    //设置定时初值
  64   1         //TR1 =0;        //关定时器1
  65   1         //TR0 =0;        //关定时器0
  66   1         ET0 = 1;       //定时器0中断使能,为1时开,为0时关
  67   1         ET1 = 1;       //定时器1中断使能,为1时开,为0时关
  68   1         //ET0 = 0;       //定时器0中断使能,为1时开,为0时关
  69   1         //ET1 = 0;       //定时器1中断使能,为1时开,为0时关    
  70   1      }
  71          /****************************************************************
  72          函数名：定时器0中断服务函数  中断号:1 ;
  73          调  用：无
  74          参  数：无
  75          返回值：无
  76          功  能：提供每列显示位置所需的时间;
  77          备  注：定时器0,工作方式1,16位定时器 1T模式, 定时153us
  78          /****************************************************************/
  79          
  80          void timer0(void)   interrupt 1   using 1
  81          {
  82   1      //    TR0=0;
  83   1      //  Time0_flag=1;            //定时中断标志位置1;
  84   1      //  TH0=-Pt/256;TL0=-Pt%256;   //设置定时器T0的初设值
  85   1      
  86   1                             //计数
  87   1      //  TR0=1;
  88   1      }
  89          
  90          /****************************************************************
  91          函数名：定时器1中断服务函数  中断号:3 ;
  92          调  用：无
  93          参  数：无
  94          返回值：无
  95          功  能：提供显示位置所需的时间;
  96          备  注：定时器1,工作方式0,16位自动重装载 1T模式, 定时125us
  97          /****************************************************************/
  98          
  99          void timer1(void)   interrupt 3   using 2
 100          {
 101   1      //  uint s,j,k,n;
 102   1      //  s++; irtime++;  j++; n++;   //  second,minute,hour
 103   1      
 104   1      }
 105            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     35    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.53.0.0   TIME                                                              08/21/2017 21:04:33 PAGE 3   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
